<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixelstars Casino ‚≠ê</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="src/styles/main.css?v=3.0">
    
    <style>
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∑–≤–µ–∑–¥—ã */
        @keyframes star-fly {
            0% {
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 15px #fbbf24);
            }
            50% {
                transform: scale(1.15) rotate(180deg);
                filter: drop-shadow(0 0 20px #f59e0b);
            }
            100% {
                transform: scale(1) rotate(360deg);
                filter: drop-shadow(0 0 15px #fbbf24);
            }
        }
        
        @keyframes star-explosion {
            0% {
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 15px #fbbf24);
                opacity: 1;
            }
            50% {
                transform: scale(1.4) rotate(180deg);
                filter: drop-shadow(0 0 25px #ef4444);
                opacity: 0.8;
            }
            100% {
                transform: scale(0.5) rotate(360deg);
                filter: drop-shadow(0 0 35px #dc2626);
                opacity: 0.3;
            }
        }
        
        @keyframes star-sparkle {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 15px #fbbf24);
            }
            50% {
                transform: scale(1.08);
                filter: drop-shadow(0 0 20px #f59e0b);
            }
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç –≤–∑—Ä—ã–≤–∞ */
        @keyframes explosion-particles {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(3);
                opacity: 0;
            }
        }
        
        .crash-star.flying {
            animation: star-fly 2s ease-in-out infinite;
        }
        
        .crash-star.crashed {
            animation: star-explosion 0.8s ease-out;
        }
        
        .crash-star.waiting {
            animation: star-sparkle 3s ease-in-out infinite;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –∫—Ä–∞—à-–∏–≥—Ä—ã */
        .crash-game-btn {
            width: 100%;
            height: 64px;
            padding: 0;
            border: none;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .crash-bet-btn {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            box-shadow: 0 8px 32px rgba(245, 158, 11, 0.4);
        }
        
        .crash-bet-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(245, 158, 11, 0.6);
        }
        
        .crash-bet-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .crash-withdraw-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.4);
        }
        
        .crash-withdraw-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(16, 185, 129, 0.6);
        }
        
        .crash-withdraw-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .crash-game-btn:disabled {
            background: rgba(255, 255, 255, 0.1) !important;
            color: rgba(255, 255, 255, 0.4) !important;
            cursor: not-allowed !important;
            box-shadow: none !important;
            transform: none !important;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∫—Ä–∞—à–µ–π */
        .crash-history-item {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 60px;
            height: 40px;
            padding: 8px 12px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .crash-history-item.low {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }
        
        .crash-history-item.medium {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
        }
        
        .crash-history-item.high {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }
        
        .crash-history-item.ultra {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }
        
        /* –ß–∞—Å—Ç–∏—Ü—ã –≤–∑—Ä—ã–≤–∞ */
        .explosion-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #fbbf24;
            border-radius: 50%;
            animation: explosion-particles 1s ease-out forwards;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <div id="loading" class="loading-screen">
            <div class="loading-content">
                <div class="loading-star">‚≠ê</div>
                <h1>Pixelstars Casino</h1>
                <div class="loading-text">–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–≤–æ—ë –∫–∞–∑–∏–Ω–æ...</div>
                <div class="loading-bar">
                    <div class="loading-progress"></div>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">‚≠ê</span>
                    <span class="logo-text">Pixelstars</span>
                </div>

                <div class="balance-display">
                    <div class="balance-amount" id="balanceAmount">0</div>
                    <div class="balance-label">–∑–≤–µ–∑–¥</div>
                    <button class="top-up-btn" id="topUpBtn" onclick="openTopUpModal()">
                        <span class="top-up-icon">üí≥</span>
                        <span class="top-up-text">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Navigation -->
        <nav class="main-nav">
                        <div class="nav-item active" onclick="switchToTab('home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-text">–ì–ª–∞–≤–Ω–∞—è</div>
            </div>
            <div class="nav-item" onclick="switchToTab('cases')">
                <div class="nav-icon">üéÅ</div>
                <div class="nav-text">–ö–µ–π—Å—ã</div>
            </div>
            <div class="nav-item" onclick="switchToTab('rocket')">
                <div class="nav-icon">üöÄ</div>
                <div class="nav-text">–†–∞–∫–µ—Ç–∞</div>
            </div>
            <div class="nav-item" onclick="switchToTab('profile')">
                <div class="nav-icon">üë§</div>
                <div class="nav-text">–ü—Ä–æ—Ñ–∏–ª—å</div>
            </div>
        </nav>

        <!-- Content Sections -->
        <main class="content">
            <!-- Home Tab -->
            <section id="home" class="tab-content active">

                <div class="welcome-section">
                    <div class="welcome-card">
                        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Pixelstars! üé∞</h2>
                        <p>–¢–≤–æ—ë –∫–∞–∑–∏–Ω–æ —Å —á–µ—Å—Ç–Ω—ã–º–∏ –∏–≥—Ä–∞–º–∏ –∏ –∫—Ä—É—Ç—ã–º–∏ –Ω–∞–≥—Ä–∞–¥–∞–º–∏</p>
                        <div class="welcome-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="totalPlayers">1,234</div>
                                <div class="stat-label">–ò–≥—Ä–æ–∫–æ–≤</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalPayout">15.2M</div>
                                <div class="stat-label">–í—ã–ø–ª–∞—á–µ–Ω–æ</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="todayGames">892</div>
                                <div class="stat-label">–ò–≥—Ä —Å–µ–≥–æ–¥–Ω—è</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="action-grid">
                        <button class="action-card" onclick="switchTab('cases')">
                            <div class="action-icon">üéÅ</div>
                            <div class="action-title">–û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å</div>
                            <div class="action-desc">–ü–æ–ª—É—á–∏ –∫—Ä—É—Ç—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</div>
                        </button>
                        <button class="action-card" onclick="switchTab('rocket')">
                            <div class="action-icon">üöÄ</div>
                            <div class="action-title">–ò–≥—Ä–∞—Ç—å –≤ –†–∞–∫–µ—Ç–∫—É</div>
                            <div class="action-desc">–£–º–Ω–æ–∂–∞–π —Å–≤–æ–∏ –∑–≤–µ–∑–¥—ã</div>
                        </button>
                        <button class="action-card" onclick="showDailyBonus()">
                            <div class="action-icon">üéä</div>
                            <div class="action-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</div>
                            <div class="action-desc">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∑–≤–µ–∑–¥—ã</div>
                        </button>
                        <button class="action-card" onclick="showLeaderboard()">
                            <div class="action-icon">üèÜ</div>
                            <div class="action-title">–†–µ–π—Ç–∏–Ω–≥</div>
                            <div class="action-desc">–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</div>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Cases Tab -->
            <section id="cases" class="tab-content">
                <div class="section-header">
                    <h2>üéÅ –ö–µ–π—Å—ã —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏</h2>
                    <p>–û—Ç–∫—Ä—ã–≤–∞–π –∫–µ–π—Å—ã –∏ –ø–æ–ª—É—á–∞–π —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
                </div>
                
                <div class="cases-grid" id="cases-grid">
                    <!-- –ö–µ–π—Å—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    <div class="loading-cases">
                        <div style="text-align: center; padding: 20px; color: #888;">
                            <div style="font-size: 2rem; margin-bottom: 10px;">‚è≥</div>
                            <div>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤...</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Rocket Tab -->
            <section id="rocket" class="tab-content">
                <div class="crash-container" style="
                    min-height: 90vh;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 20px;
                    background: radial-gradient(ellipse at center, rgba(99, 102, 241, 0.1) 0%, transparent 70%);
                ">
                    
                    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∫—Ä–∞—à-–∏–≥—Ä—ã -->
                    <div class="crash-main" style="
                        background: linear-gradient(145deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
                        border-radius: 24px;
                        padding: 60px;
                        width: 100%;
                        max-width: 580px;
                        min-height: 700px;
                        text-align: center;
                        box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);
                        position: relative;
                        overflow: hidden;
                        display: flex;
                        flex-direction: column;
                        justify-content: space-between;
                    ">
                        <!-- –í–µ—Ä—Ö–Ω—è—è –∑–æ–Ω–∞ —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º -->
                        <div class="multiplier-section" style="
                            height: 120px;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            margin-bottom: 30px;
                        ">
                            <div class="crash-multiplier" id="crashMultiplier" style="
                                font-size: 5.5rem;
                                font-weight: 900;
                                background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%);
                                -webkit-background-clip: text;
                                -webkit-text-fill-color: transparent;
                                background-clip: text;
                                filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.4));
                                letter-spacing: -2px;
                                line-height: 0.9;
                                position: relative;
                            ">1.00x</div>
                        </div>

                        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –∑–æ–Ω–∞ -->
                        <div class="crash-display" style="margin-bottom: 50px; position: relative;">
                            <div class="crash-status" id="crashStatus" style="
                                font-size: 1.2rem;
                                color: rgba(255, 255, 255, 0.8);
                                margin-bottom: 25px;
                                font-weight: 500;
                                position: relative;
                                z-index: 2;
                            ">–û–∂–∏–¥–∞–Ω–∏–µ —Ä–∞—É–Ω–¥–∞...</div>
                        </div>

                        <!-- –ù–∏–∂–Ω—è—è –∑–æ–Ω–∞ —Å–æ –∑–≤–µ–∑–¥–æ–π -->
                        <div class="star-section" style="
                            height: 80px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            margin-bottom: 30px;
                        ">
                            <div class="crash-star-container" id="crashStarContainer" style="
                                font-size: 2rem;
                                position: relative;
                            ">
                                <div class="crash-star" id="crashStar" style="
                                    display: inline-block;
                                    filter: drop-shadow(0 0 15px #fbbf24);
                                    transition: all 0.3s ease;
                                ">‚≠ê</div>
                            </div>
                        </div>
                        
                        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
                        <div class="crash-controls" style="
                            display: flex;
                            flex-direction: column;
                            gap: 30px;
                        ">
                            <div class="control-group" style="
                                display: flex;
                                flex-direction: column;
                                gap: 12px;
                            ">
                                <label style="
                                    color: rgba(255, 255, 255, 0.9);
                                    font-weight: 600;
                                    text-transform: uppercase;
                                    letter-spacing: 1px;
                                    font-size: 0.85rem;
                                ">–°—Ç–∞–≤–∫–∞</label>
                                <input type="number" id="crashBetAmount" value="100" min="50" max="10000" step="50" style="
                                    padding: 18px 24px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 2px solid rgba(251, 191, 36, 0.2);
                                    border-radius: 16px;
                                    color: white;
                                    font-size: 1.3rem;
                                    text-align: center;
                                    font-weight: 600;
                                    backdrop-filter: blur(10px);
                                " class="bet-input">
                            </div>

                            
                            <div class="control-group" style="
                                display: flex;
                                flex-direction: column;
                                gap: 12px;
                            ">
                                <label class="checkbox-label" style="
                                    display: flex;
                                    align-items: center;
                                    gap: 12px;
                                    cursor: pointer;
                                    justify-content: center;
                                    color: rgba(255, 255, 255, 0.9);
                                    font-weight: 600;
                                    text-transform: uppercase;
                                    letter-spacing: 1px;
                                    font-size: 0.85rem;
                                ">
                                    <input type="checkbox" id="autoWithdrawEnabled" checked style="
                                        width: 20px;
                                        height: 20px;
                                        accent-color: #fbbf24;
                                        border-radius: 4px;
                                    "> 
                                    –ê–≤—Ç–æ–≤—ã–≤–æ–¥ –Ω–∞
                                </label>
                                <input type="number" id="autoWithdraw" value="2.0" min="1.1" max="100" step="0.1" style="
                                    padding: 18px 24px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 2px solid rgba(251, 191, 36, 0.2);
                                    border-radius: 16px;
                                    color: white;
                                    font-size: 1.3rem;
                                    text-align: center;
                                    font-weight: 600;
                                    backdrop-filter: blur(10px);
                                " class="auto-input">
                            </div>
                            
                            <div class="control-buttons" style="
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                                gap: 20px;
                                margin-top: 15px;
                            ">
                                <button id="crashBetBtn" class="crash-game-btn crash-bet-btn">
                                    –ü–æ—Å—Ç–∞–≤–∏—Ç—å
                                </button>
                                <button id="crashWithdrawBtn" class="crash-game-btn crash-withdraw-btn">
                                    –ó–∞–±—Ä–∞—Ç—å
                                </button>
                            </div>
                        </div>
                        
                        <!-- –ò—Å—Ç–æ—Ä–∏—è –∫—Ä–∞—à–µ–π -->
                        <div class="crash-history" style="
                            margin-top: 40px;
                            padding: 25px;
                            background: rgba(0, 0, 0, 0.2);
                            border-radius: 20px;
                            border: 1px solid rgba(255, 255, 255, 0.1);
                        ">
                            <h3 style="
                                color: rgba(255, 255, 255, 0.9);
                                font-size: 1.1rem;
                                font-weight: 600;
                                margin: 0 0 20px 0;
                                text-transform: uppercase;
                                letter-spacing: 1px;
                            ">üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫—Ä–∞—à–∏</h3>
                            <div id="crashHistoryList" style="
                                display: flex;
                                gap: 10px;
                                justify-content: center;
                                flex-wrap: wrap;
                            ">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Profile Tab -->
            <section id="profile" class="tab-content">
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <span id="profileInitials">üë§</span>
                        </div>
                        <div class="profile-info">
                            <h2 id="profileName">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                            <p id="profileLevel">–£—Ä–æ–≤–µ–Ω—å 1</p>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">‚≠ê</div>
                            <div class="stat-content">
                                <div class="stat-value" id="profileBalance">0</div>
                                <div class="stat-label">–ó–≤–µ–∑–¥</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéÆ</div>
                            <div class="stat-content">
                                <div class="stat-value" id="profileGames">0</div>
                                <div class="stat-label">–ò–≥—Ä</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üéÅ</div>
                            <div class="stat-content">
                                <div class="stat-value" id="profileCases">0</div>
                                <div class="stat-label">–ö–µ–π—Å–æ–≤</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-content">
                                <div class="stat-value" id="profileProfit">0</div>
                                <div class="stat-label">–ü—Ä–∏–±—ã–ª—å</div>
                            </div>
                        </div>
                    </div>

                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ -->
                    <div class="bot-section" style="
                        margin: 30px 0;
                        padding: 25px;
                        background: linear-gradient(135deg, rgba(82, 136, 193, 0.1) 0%, rgba(82, 136, 193, 0.05) 100%);
                        border-radius: 20px;
                        border: 1px solid rgba(82, 136, 193, 0.2);
                    ">
                        <h3 style="
                            color: #5288c1;
                            font-size: 1.1rem;
                            font-weight: 600;
                            margin: 0 0 20px 0;
                            display: flex;
                            align-items: center;
                            gap: 10px;
                        ">
                            ü§ñ Telegram Bot
                        </h3>
                        
                        <div class="bot-info" style="
                            display: flex;
                            flex-direction: column;
                            gap: 15px;
                        ">
                            <div class="bot-status" id="botStatus" style="
                                padding: 15px;
                                background: rgba(0, 0, 0, 0.2);
                                border-radius: 12px;
                                color: rgba(255, 255, 255, 0.8);
                                font-size: 0.9rem;
                            ">
                                üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–æ—Ç–æ–º...
                            </div>
                            
                            <div class="bot-actions" style="
                                display: flex;
                                gap: 10px;
                                flex-wrap: wrap;
                            ">
                                <button onclick="testBotConnection()" style="
                                    padding: 12px 20px;
                                    background: linear-gradient(135deg, #5288c1 0%, #4a7ba7 100%);
                                    color: white;
                                    border: none;
                                    border-radius: 12px;
                                    font-size: 0.9rem;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                    üîç –¢–µ—Å—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
                                </button>
                                
                                <button onclick="syncWithBot()" style="
                                    padding: 12px 20px;
                                    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                                    color: white;
                                    border: none;
                                    border-radius: 12px;
                                    font-size: 0.9rem;
                                    font-weight: 600;
                                    cursor: pointer;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                                    üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–æ–¥–∞—Ä–∫–æ–≤ -->
                    <div class="inventory-section">
                        <div class="inventory-header-profile">
                            <h3>üéí –ú–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
                            <div class="inventory-stats-profile">
                                <div class="inventory-stat-profile">
                                    <span class="stat-label">–ü—Ä–µ–¥–º–µ—Ç–æ–≤:</span>
                                    <span class="stat-value" id="totalItems">0</span>
                                </div>
                                <div class="inventory-stat-profile">
                                    <span class="stat-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                    <span class="stat-value" id="totalValue">0‚≠ê</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="inventory-actions-profile">
                            <button class="action-btn-small" onclick="refreshInventory()">
                                ÔøΩ –û–±–Ω–æ–≤–∏—Ç—å
                            </button>
                            <button class="action-btn-small" onclick="sellAllCommon()">
                                üí∞ –ü—Ä–æ–¥–∞—Ç—å –æ–±—ã—á–Ω—ã–µ
                            </button>
                        </div>
                        
                        <div class="inventory-grid" id="inventoryGrid">
                            <div class="inventory-loading">
                                <div class="loading-spinner"></div>
                                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Case Preview Modal -->
    <div id="case-preview-modal" class="modal">
        <div class="modal-content case-preview-content">
            <div class="case-preview-header">
                <h2 id="case-preview-title">–ü—Ä–µ–º–∏—É–º –∫–µ–π—Å</h2>
                <span class="close-modal" id="close-preview-modal">&times;</span>
            </div>
            
            <div class="case-preview-info">
                <div class="case-preview-image">
                    <div class="case-icon" id="case-preview-icon">üì¶</div>
                    <div class="case-price" id="case-preview-price">100 ‚≠ê</div>
                </div>
                
                <div class="case-preview-description">
                    <p id="case-preview-desc">–û—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç–æ—Ç –∫–µ–π—Å –∏ –ø–æ–ª—É—á–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —ç—Ç–∏—Ö –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤!</p>
                </div>
            </div>

            <div class="prizes-preview">
                <h3>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏–∑—ã:</h3>
                <div class="prizes-grid" id="prizes-preview-grid">
                    <!-- –ü—Ä–∏–∑—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>

            <div class="case-preview-actions">
                <button class="open-case-btn" id="open-case-from-preview">
                    <span class="btn-icon">üé∞</span>
                    –û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å
                </button>
                <button class="cancel-btn" id="cancel-case-preview">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <!-- Case Opening Modal -->
    <div id="case-modal" class="modal">
        <div class="modal-content case-modal-content">
            <!-- Case Opening Animation -->
            <div id="case-opening" class="case-opening">
                <h3 class="case-opening-title">–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–µ–π—Å...</h3>
                
                <div class="roulette-container">
                    <div class="roulette-items" id="roulette-items">
                        <!-- –†—É–ª–µ—Ç–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ -->
                    </div>
                </div>
                
                <div class="opening-text">
                    <p>üé∞ –ö—Ä—É—Ç–∏–º –±–∞—Ä–∞–±–∞–Ω...</p>
                </div>
            </div>

            <!-- Case Result -->
            <div id="case-result" class="case-result">
                <div class="result-emoji" id="result-emoji">üéÅ</div>
                <h3 class="result-title" id="result-title">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
                <p class="result-description" id="result-description">–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ –ø—Ä–∏–∑!</p>
                
                <div class="result-actions">
                    <button class="result-btn" id="open-another-case">–û—Ç–∫—Ä—ã—Ç—å –µ—â—ë</button>
                    <button class="result-btn secondary" id="close-case-modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Top Up Modal -->
    <div id="top-up-modal" class="modal">
        <div class="modal-content top-up-content">
            <div class="top-up-header">
                <h2>üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h2>
                <span class="close-modal" id="close-top-up-modal">&times;</span>
            </div>
            
            <div class="top-up-body">
                <div class="top-up-info">
                    <div class="current-balance">
                        <span class="balance-label">–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å:</span>
                        <span class="balance-value" id="current-balance-display">0 –∑–≤–µ–∑–¥</span>
                    </div>
                </div>
                
                <div class="top-up-packages">
                    <h3>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç –∑–≤–µ–∑–¥:</h3>
                    
                    <div class="package-grid">
                        <div class="package-item" data-stars="100" data-price="99">
                            <div class="package-stars">‚≠ê 100</div>
                            <div class="package-price">99‚ÇΩ</div>
                            <div class="package-bonus">–°—Ç–∞—Ä—Ç–æ–≤—ã–π</div>
                        </div>
                        
                        <div class="package-item popular" data-stars="500" data-price="449">
                            <div class="package-badge">–ü–æ–ø—É–ª—è—Ä–Ω—ã–π</div>
                            <div class="package-stars">‚≠ê 500</div>
                            <div class="package-price">449‚ÇΩ</div>
                            <div class="package-bonus">+50 –±–æ–Ω—É—Å</div>
                        </div>
                        
                        <div class="package-item" data-stars="1000" data-price="799">
                            <div class="package-stars">‚≠ê 1000</div>
                            <div class="package-price">799‚ÇΩ</div>
                            <div class="package-bonus">+100 –±–æ–Ω—É—Å</div>
                        </div>
                        
                        <div class="package-item vip" data-stars="2500" data-price="1899">
                            <div class="package-badge">VIP</div>
                            <div class="package-stars">‚≠ê 2500</div>
                            <div class="package-price">1899‚ÇΩ</div>
                            <div class="package-bonus">+300 –±–æ–Ω—É—Å</div>
                        </div>
                    </div>
                </div>
                
                <div class="top-up-bot-info">
                    <div class="bot-instruction">
                        <h4>ü§ñ –ö–∞–∫ –ø–æ–ø–æ–ª–Ω–∏—Ç—å:</h4>
                        <ol>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–∫–µ—Ç –∑–≤–µ–∑–¥ –≤—ã—à–µ</li>
                            <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –±–æ—Ç—É @puwmvshop_bot</li>
                            <li>–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –±–æ—Ç–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã</li>
                            <li>–ó–≤–µ–∑–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞—á–∏—Å–ª—è—Ç—Å—è –Ω–∞ –≤–∞—à —Å—á–µ—Ç</li>
                        </ol>
                    </div>
                    
                    <div class="bot-actions">
                        <a href="https://t.me/puwmvshop_bot" target="_blank" class="bot-link-btn">
                            <span class="bot-icon">üí¨</span>
                            <span class="bot-text">–ü–µ—Ä–µ–π—Ç–∏ –∫ –±–æ—Ç—É</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="src/main.js?v=138" type="module"></script>
    <script src="src/games/clean-crash.js?v=18.0"></script>
    <script>
        // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø –ú–ï–ñ–î–£ –í–ö–õ–ê–î–ö–ê–ú–ò =====
        function switchToTab(tabName) {
            console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', tabName);
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å–µ–∫—Ü–∏–∏
            document.querySelectorAll('.tab-content').forEach(section => {
                section.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å–µ–∫—Ü–∏—é
            const targetSection = document.getElementById(tabName);
            if (targetSection) {
                targetSection.classList.add('active');
                console.log('–°–µ–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∞:', tabName);
            } else {
                console.error('–°–µ–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞:', tabName);
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É
            const navItems = document.querySelectorAll('.nav-item');
            const tabOrder = ['home', 'cases', 'rocket', 'profile'];
            const tabIndex = tabOrder.indexOf(tabName);
            if (tabIndex >= 0 && navItems[tabIndex]) {
                navItems[tabIndex].classList.add('active');
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤–∫–ª–∞–¥–æ–∫
            if (tabName === 'profile' && typeof loadInventory === 'function') {
                setTimeout(() => loadInventory(), 100);
            } else if (tabName === 'rocket') {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞–∫–µ—Ç—É –µ—Å–ª–∏ –µ—â–µ –Ω–µ –±—ã–ª–æ
                if (!window.rocketInitialized) {
                    setTimeout(() => initRocketGame(), 100);
                    window.rocketInitialized = true;
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é');
            switchToTab('home');
            initRocketGame();
        });
        
        // ===== ROCKET GAME FUNCTIONS =====
        let rocketGameState = {
            phase: 'waiting',
            multiplier: 1.0,
            playerBet: null,
            history: []
        };
        
        // –°—Ç–∞—Ä—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–±—Ä–∞–Ω—ã - —Ç–µ–ø–µ—Ä—å –∫—Ä–∞—à —Å –Ω—É–ª—è
        function initRocketGame() { console.log('üóëÔ∏è –°—Ç–∞—Ä—ã–π –∫—Ä–∞—à –æ—Ç–∫–ª—é—á–µ–Ω'); }
        function loadRocketHistory() { return; }
        function updateHistoryDisplay() { return; }
        function startRocketPolling() { return; }
        
        function updateRocketGameDisplay(data) { return; }
        
        function updateBettingButtons(data) { return; }
        
        // –°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É
        function placeBet() { console.log('placeBet disabled'); }
        
        // –ó–∞–±—Ä–∞—Ç—å —Å—Ç–∞–≤–∫—É
        function withdrawBet() { console.log('withdrawBet disabled'); }
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–µ–π—Å–æ–≤ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ–π —Ä–∞–±–æ—Ç—ã
        window.casesData = [
            {
                id: 'starter_box',
                name: 'üéÅ –°—Ç–∞—Ä—Ç–æ–≤—ã–π –±–æ–∫—Å',
                cost: 50,
                image: 'üéÅ',
                emoji: 'üéÅ',
                rarity: 'common',
                description: '–ò–¥–µ–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤!'
            },
            {
                id: 'premium_case',
                name: 'üåü –ü—Ä–µ–º–∏—É–º –∫–µ–π—Å',
                cost: 120,
                image: 'üåü',
                emoji: 'üåü',
                rarity: 'rare',
                description: '–ë–æ–ª—å—à–µ –∑–≤–µ–∑–¥ –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏!'
            },
            {
                id: 'golden_box',
                name: 'üíé –ó–æ–ª–æ—Ç–æ–π –±–æ–∫—Å',
                cost: 250,
                image: 'üíé',
                emoji: 'üíé',
                rarity: 'epic',
                description: '–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∫—Ä—É–ø–Ω—ã–µ –ø—Ä–∏–∑—ã!'
            },
            {
                id: 'royal_chest',
                name: 'ÔøΩ –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —Å—É–Ω–¥—É–∫',
                cost: 500,
                image: 'üëë',
                emoji: 'üëë',
                rarity: 'legendary',
                description: '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã!'
            },
            {
                id: 'cosmic_vault',
                name: 'ÔøΩ –ö–æ—Å–º–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ',
                cost: 1000,
                image: 'üöÄ',
                emoji: 'üöÄ',
                rarity: 'mythic',
                description: '–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–∑—ã!'
            }
        ];
        
        // –ü—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–µ–π—Å—ã');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ä–∞–∑—É
            setTimeout(function() {
                loadCasesInstant();
            }, 500);
        });
        
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–µ–π—Å–æ–≤
        function loadCasesInstant() {
            console.log('‚ö° –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–µ–π—Å—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ');
            
            const casesGrid = document.getElementById('cases-grid');
            if (!casesGrid) {
                console.error('‚ùå cases-grid –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            // –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∫–µ–π—Å—ã
            casesGrid.innerHTML = window.casesData.map(caseData => `
                <div class="case-card ${caseData.rarity}" data-case-id="${caseData.id}" onclick="showCasePreview('${caseData.id}')">
                    <div class="case-header">
                        <div class="case-image">${caseData.emoji}</div>
                        <div class="case-rarity-badge">${getRarityName(caseData.rarity)}</div>
                    </div>
                    <div class="case-body">
                        <h3 class="case-name">${caseData.name}</h3>
                        <p class="case-description">${caseData.description}</p>
                        <div class="case-price">${caseData.cost} ‚≠ê</div>
                        <div class="case-click-hint">ÔøΩÔ∏è –ù–∞–∂–º–∏ —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å</div>
                    </div>
                </div>
            `).join('');
            
            console.log('‚úÖ –ö–µ–π—Å—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã!');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
            const cards = casesGrid.querySelectorAll('.case-card');
            cards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'all 0.5s ease';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–¥–∫–æ—Å—Ç–∏
        function getRarityName(rarity) {
            const names = {
                'common': '–û–±—ã—á–Ω—ã–π',
                'rare': '–†–µ–¥–∫–∏–π',
                'epic': '–≠–ø–∏—á–µ—Å–∫–∏–π',
                'legendary': '–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π',
                'mythic': '–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π'
            };
            return names[rarity] || '–û–±—ã—á–Ω—ã–π';
        }
        
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–∑–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–µ–π—Å–∞
        window.casesData.forEach(caseData => {
            const prizes = {
                'starter_box': [
                    { name: '25 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'common', chance: '35%' },
                    { name: '50 –∑–≤–µ–∑–¥', emoji: 'üí´', rarity: 'common', chance: '25%' },
                    { name: '–¢—é–ª—å–ø–∞–Ω', emoji: 'üå∑', rarity: 'common', chance: '20%' },
                    { name: '–†–æ–∑–∞', emoji: 'üåπ', rarity: 'common', chance: '15%' },
                    { name: '–†–æ–º–∞—à–∫–∞', emoji: 'üåº', rarity: 'rare', chance: '5%' }
                ],
                'premium_case': [
                    { name: '75 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'rare', chance: '30%' },
                    { name: '150 –∑–≤–µ–∑–¥', emoji: 'üí´', rarity: 'rare', chance: '20%' },
                    { name: '–¢–æ—Ä—Ç', emoji: 'üéÇ', rarity: 'rare', chance: '20%' },
                    { name: '–®–∞—Ä—ã', emoji: 'üéà', rarity: 'rare', chance: '15%' },
                    { name: '–ö–µ–∫—Å', emoji: 'üßÅ', rarity: 'epic', chance: '10%' },
                    { name: '–ö–æ–Ω—Ñ–µ—Ç—ã', emoji: 'üç¨', rarity: 'epic', chance: '5%' }
                ],
                'golden_box': [
                    { name: '200 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'epic', chance: '25%' },
                    { name: '350 –∑–≤–µ–∑–¥', emoji: 'üåü', rarity: 'epic', chance: '15%' },
                    { name: '–ú–∏—à–∫–∞', emoji: 'üß∏', rarity: 'epic', chance: '20%' },
                    { name: '–ò–∑—É–º—Ä—É–¥', emoji: 'üíö', rarity: 'epic', chance: '15%' },
                    { name: '–°–∞–ø—Ñ–∏—Ä', emoji: 'üíô', rarity: 'legendary', chance: '12%' },
                    { name: '–ê–ª–º–∞–∑', emoji: 'üíé', rarity: 'legendary', chance: '8%' },
                    { name: '–†—É–±–∏–Ω', emoji: '‚ù§Ô∏è', rarity: 'legendary', chance: '5%' }
                ],
                'royal_chest': [
                    { name: '500 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'legendary', chance: '20%' },
                    { name: '1000 –∑–≤–µ–∑–¥', emoji: 'üåü', rarity: 'legendary', chance: '10%' },
                    { name: '–ö–æ—Ä–æ–Ω–∞', emoji: 'üëë', rarity: 'legendary', chance: '15%' },
                    { name: '–°–∫–∏–ø–µ—Ç—Ä', emoji: 'ü™Ñ', rarity: 'legendary', chance: '12%' },
                    { name: '–¢—Ä–æ–Ω', emoji: 'ü™ë', rarity: 'legendary', chance: '10%' },
                    { name: '–ï–¥–∏–Ω–æ—Ä–æ–≥', emoji: 'ü¶Ñ', rarity: 'mythic', chance: '8%' },
                    { name: '–ú–ï–ì–ê –î–ñ–ï–ö–ü–û–¢', emoji: 'üé∞', rarity: 'mythic', chance: '3%' },
                    { name: '–î—Ä–∞–∫–æ–Ω', emoji: 'üêâ', rarity: 'mythic', chance: '2%' }
                ],
                'cosmic_vault': [
                    { name: '1500 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'mythic', chance: '15%' },
                    { name: '3000 –∑–≤–µ–∑–¥', emoji: 'üåü', rarity: 'mythic', chance: '8%' },
                    { name: '–ö–æ—Å–º–æ–∫–æ—Ä–∞–±–ª—å', emoji: 'üöÄ', rarity: 'mythic', chance: '12%' },
                    { name: '–ü–ª–∞–Ω–µ—Ç–∞', emoji: 'ü™ê', rarity: 'mythic', chance: '10%' },
                    { name: '–ì–∞–ª–∞–∫—Ç–∏–∫–∞', emoji: 'üåå', rarity: 'mythic', chance: '8%' },
                    { name: '–ß–µ—Ä–Ω–∞—è –¥—ã—Ä–∞', emoji: 'üï≥Ô∏è', rarity: 'mythic', chance: '6%' },
                    { name: '–ò–Ω–æ–ø–ª–∞–Ω–µ—Ç—è–Ω–∏–Ω', emoji: 'üëΩ', rarity: 'mythic', chance: '12%' },
                    { name: '–ù–õ–û', emoji: 'üõ∏', rarity: 'mythic', chance: '12%' },
                    { name: '–ö–û–°–ú–û –î–ñ–ï–ö–ü–û–¢', emoji: 'üí•', rarity: 'mythic', chance: '2%' }
                ]
            };
            caseData.prizes = prizes[caseData.id] || [];
        });
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é –∫–µ–π—Å–∞ (–ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É)
        function showCasePreview(caseId) {
            const selectedCase = window.casesData.find(c => c.id === caseId);
            if (!selectedCase) return;
            
            const balance = window.getBalance ? window.getBalance() : 0;
            
            const modal = document.createElement('div');
            modal.className = 'case-preview-modal-new';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeCasePreviewNew()"></div>
                <div class="preview-content-new">
                    <div class="preview-header-new ${selectedCase.rarity}">
                        <button class="close-btn-new" onclick="closeCasePreviewNew()">‚úï</button>
                        <div class="case-icon-preview">${selectedCase.emoji}</div>
                        <h2>${selectedCase.name}</h2>
                        <div class="rarity-badge-preview">${getRarityName(selectedCase.rarity)}</div>
                    </div>
                    
                    <div class="preview-body-new">
                        <div class="case-info-new">
                            <p>${selectedCase.description}</p>
                            <div class="price-info">
                                <span class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                <span class="price-value">${selectedCase.cost} ‚≠ê</span>
                            </div>
                            <div class="balance-info">
                                <span class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å:</span>
                                <span class="balance-value ${balance >= selectedCase.cost ? 'enough' : 'not-enough'}">${balance} ‚≠ê</span>
                            </div>
                        </div>
                        
                        <div class="prizes-section-new">
                            <h3>üéÅ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏–∑—ã:</h3>
                            <div class="prizes-list-new">
                                ${selectedCase.prizes.map(prize => `
                                    <div class="prize-item-new ${prize.rarity}">
                                        <div class="prize-emoji-new">${prize.emoji}</div>
                                        <div class="prize-details">
                                            <div class="prize-name-new">${prize.name}</div>
                                            <div class="prize-chance-new">${prize.chance}</div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="preview-actions-new">
                            ${balance >= selectedCase.cost ? 
                                `<button class="open-btn-new ${selectedCase.rarity}" onclick="openCaseFromPreviewNew('${selectedCase.id}')">
                                    üé∞ –û–¢–ö–†–´–¢–¨ –ö–ï–ô–° - ${selectedCase.cost} ‚≠ê
                                </button>` :
                                `<button class="open-btn-new disabled" disabled>
                                    ‚ùå –ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –ó–í–ï–ó–î
                                </button>`
                            }
                            <button class="cancel-btn-new" onclick="closeCasePreviewNew()">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å –∏–∑ –ø—Ä–µ–≤—å—é
        async function openCaseFromPreviewNew(caseId) {
            const selectedCase = window.casesData.find(c => c.id === caseId);
            
            // –ü–æ–ª—É—á–∞–µ–º Telegram ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const telegramUser = window.Telegram?.WebApp?.initDataUnsafe?.user;
            const telegramId = telegramUser?.id || window.pixelstarsApp?.demoUser?.telegram_id;
            
            if (!telegramId) {
                showQuickError('–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                return;
            }
            
            try {
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
                closeCasePreviewNew();
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                const response = await fetch('/api/open-case', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        userId: telegramId.toString(),
                        caseId: caseId
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    if (window.pixelstarsApp && window.pixelstarsApp.updateUserBalance) {
                        await window.pixelstarsApp.updateUserBalance(data.newBalance);
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                    showInstantOpening(selectedCase, data.result);
                    
                    // –ï—Å–ª–∏ –ø–æ–≤—ã—Å–∏–ª—Å—è —É—Ä–æ–≤–µ–Ω—å
                    if (data.level_up) {
                        setTimeout(() => {
                            showQuickError(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Ä–æ–≤–Ω—è ${data.new_level}!`);
                        }, 2000);
                    }
                } else {
                    showQuickError(data.error || '–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∫–µ–π—Å–∞');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞:', error);
                showQuickError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –Ω–æ–≤–æ–µ –ø—Ä–µ–≤—å—é
        function closeCasePreviewNew() {
            const modal = document.querySelector('.case-preview-modal-new');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // –ë—ã—Å—Ç—Ä–∞—è –æ—à–∏–±–∫–∞ (–ø—Ä–æ—Å—Ç–æ–π –∞–ª–µ—Ä—Ç)
        function showQuickError(message) {
            // –°–æ–∑–¥–∞–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ alert
            const notification = document.createElement('div');
            notification.className = 'error-notification';
            notification.innerHTML = `
                <div class="error-content">
                    <div class="error-icon">‚ùå</div>
                    <div class="error-text">${message.replace(/\n/g, '<br>')}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => notification.classList.add('show'), 10);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
        function showInstantOpening(caseData, serverPrize = null) {
            const wonPrize = serverPrize || getRandomPrize(caseData);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º
            showInstantResult(caseData, wonPrize);
        }
        
        // –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        function showInstantResult(caseData, wonPrize) {
            const modal = document.createElement('div');
            modal.className = 'instant-result-modal';
            modal.innerHTML = `
                <div class="instant-backdrop" onclick="closeInstantResult()"></div>
                <div class="instant-content ${wonPrize.rarity}">
                    <div class="instant-header">
                        <div class="case-opened">–û—Ç–∫—Ä—ã–ª–∏: ${caseData.emoji}</div>
                        <div class="prize-won">üéâ –í–´–ò–ì–†–ê–õ–ò! üéâ</div>
                    </div>
                    <div class="instant-prize">
                        <div class="prize-icon-big">${wonPrize.emoji}</div>
                        <div class="prize-name-big">${wonPrize.name}</div>
                        <div class="prize-rarity-big">${getRarityName(wonPrize.rarity)}</div>
                    </div>
                    <div class="instant-actions">
                        <button class="repeat-btn" onclick="closeInstantResult(); openCaseFromPreviewNew('${caseData.id}')">
                            üîÑ –ü–û–í–¢–û–†–ò–¢–¨
                        </button>
                        <button class="continue-btn" onclick="closeInstantResult()">
                            ‚úÖ –ü–†–û–î–û–õ–ñ–ò–¢–¨
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
            
            // –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (document.querySelector('.instant-result-modal')) {
                    closeInstantResult();
                }
            }, 5000);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        function closeInstantResult() {
            const modal = document.querySelector('.instant-result-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω–æ–µ –ø—Ä–µ–≤—å—é –ø—Ä–∏ –æ—à–∏–±–∫–µ
        function showCompactPreview(caseData, errorMessage) {
            const modal = document.createElement('div');
            modal.className = 'compact-preview-modal';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeCompactPreview()"></div>
                <div class="compact-content">
                    <div class="compact-header ${caseData.rarity}">
                        <div class="case-icon">${caseData.emoji}</div>
                        <h3>${caseData.name}</h3>
                        <div class="price">${caseData.cost} ‚≠ê</div>
                    </div>
                    <div class="compact-body">
                        <div class="error-message">‚ùå ${errorMessage}</div>
                        <div class="quick-prizes">
                            ${caseData.prizes.slice(0, 4).map(prize => `
                                <div class="mini-prize ${prize.rarity}">
                                    <span>${prize.emoji}</span>
                                    <small>${prize.chance}</small>
                                </div>
                            `).join('')}
                        </div>
                        <button class="close-compact-btn" onclick="closeCompactPreview()">
                            –ü–æ–Ω—è—Ç–Ω–æ
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –±—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ
        function showQuickOpeningFlow(caseData) {
            const wonPrize = getRandomPrize(caseData);
            
            // –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —á—Ç–æ –∫–µ–π—Å –≤—ã–±—Ä–∞–Ω
            const modal = document.createElement('div');
            modal.className = 'quick-opening-modal';
            modal.innerHTML = `
                <div class="opening-backdrop"></div>
                <div class="quick-opening-content">
                    <div class="opening-case-display ${caseData.rarity}">
                        <div class="case-icon-big">${caseData.emoji}</div>
                        <div class="opening-text">–û—Ç–∫—Ä—ã–≤–∞–µ–º...</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
            
            // –ß–µ—Ä–µ–∑ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            setTimeout(() => {
                modal.remove();
                showCompactResult(caseData, wonPrize);
            }, 1500);
        }
        
        // –°–æ–∑–¥–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–≤—å—é
        function createCasePreviewModal(caseData) {
            const modal = document.createElement('div');
            modal.className = 'case-preview-modal';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeCasePreview()"></div>
                <div class="modal-content case-preview-content">
                    <div class="preview-header">
                        <div class="case-preview-icon ${caseData.rarity}">${caseData.emoji}</div>
                        <h2 class="case-preview-title">${caseData.name}</h2>
                        <div class="case-preview-rarity">${getRarityName(caseData.rarity)}</div>
                        <button class="close-btn" onclick="closeCasePreview()">‚úï</button>
                    </div>
                    
                    <div class="preview-body">
                        <div class="case-info">
                            <p class="case-preview-description">${caseData.description}</p>
                            <div class="case-preview-price">
                                <span class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                <span class="price-value">${caseData.cost} ‚≠ê</span>
                            </div>
                        </div>
                        
                        <div class="prizes-section">
                            <h3 class="prizes-title">üéÅ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏–∑—ã:</h3>
                            <div class="prizes-grid">
                                ${caseData.prizes.map(prize => `
                                    <div class="prize-item ${prize.rarity}">
                                        <div class="prize-emoji">${prize.emoji}</div>
                                        <div class="prize-name">${prize.name}</div>
                                        <div class="prize-chance">${prize.chance}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="preview-actions">
                            <button class="open-case-btn ${caseData.rarity}" onclick="openCaseFromPreview('${caseData.id}')">
                                üé∞ –û–¢–ö–†–´–¢–¨ –ö–ï–ô–° - ${caseData.cost} ‚≠ê
                            </button>
                            <button class="cancel-btn" onclick="closeCasePreview()">
                                –û—Ç–º–µ–Ω–∞
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return modal;
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –∫–µ–π—Å –∏–∑ –ø—Ä–µ–≤—å—é
        function openCaseFromPreview(caseId) {
            const selectedCase = window.casesData.find(c => c.id === caseId);
            const balance = window.getBalance ? window.getBalance() : 0;
            
            if (balance < selectedCase.cost) {
                alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥! –ù—É–∂–Ω–æ: ' + selectedCase.cost + ' ‚≠ê');
                return;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é
            closeCasePreview();
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º –∑–≤–µ–∑–¥—ã
            if (window.updateBalance) {
                window.updateBalance(-selectedCase.cost);
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è
            showCaseOpeningAnimation(selectedCase);
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–µ–≤—å—é
        function closeCasePreview() {
            const modal = document.querySelector('.case-preview-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
        function showCaseOpeningAnimation(caseData) {
            const wonPrize = getRandomPrize(caseData);
            
            const modal = document.createElement('div');
            modal.className = 'case-opening-modal';
            modal.innerHTML = `
                <div class="modal-backdrop"></div>
                <div class="opening-content">
                    <div class="opening-header">
                        <h2>–û—Ç–∫—Ä—ã–≤–∞–µ–º ${caseData.name}...</h2>
                    </div>
                    
                    <div class="case-opening-animation">
                        <div class="opening-case ${caseData.rarity}">
                            <div class="case-lid"></div>
                            <div class="case-body-anim"></div>
                            <div class="sparkles"></div>
                        </div>
                    </div>
                    
                    <div class="opening-text">
                        <p id="opening-status">ÔøΩ –û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–µ–π—Å...</p>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                modal.classList.add('active');
            }, 10);
            
            // –≠—Ç–∞–ø—ã –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                document.getElementById('opening-status').textContent = '‚ú® –ö–µ–π—Å —Ç—Ä—è—Å–µ—Ç—Å—è...';
                modal.querySelector('.opening-case').classList.add('shaking');
            }, 1000);
            
            setTimeout(() => {
                document.getElementById('opening-status').textContent = 'üí• –ö–µ–π—Å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è!';
                modal.querySelector('.opening-case').classList.add('opening');
            }, 2500);
            
            setTimeout(() => {
                modal.remove();
                showCaseResult(caseData, wonPrize);
            }, 4000);
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –ø—Ä–∏–∑
        function getRandomPrize(caseData) {
            if (!caseData.prizes || caseData.prizes.length === 0) {
                return { name: '50 –∑–≤–µ–∑–¥', emoji: '‚≠ê', rarity: 'common' };
            }
            
            // –°–∏—Å—Ç–µ–º–∞ –≤–µ—Å–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —à–∞–Ω—Å–æ–≤
            const rand = Math.random() * 100;
            let cumulativeChance = 0;
            
            for (const prize of caseData.prizes) {
                cumulativeChance += parseFloat(prize.chance);
                if (rand <= cumulativeChance) {
                    return prize;
                }
            }
            
            // Fallback
            return caseData.prizes[Math.floor(Math.random() * caseData.prizes.length)];
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
        function showCaseResult(caseData, wonPrize) {
            // –ï—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–ª–∏ –∑–≤–µ–∑–¥—ã, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
            if (wonPrize.name.includes('–∑–≤–µ–∑–¥')) {
                const starsAmount = parseInt(wonPrize.name);
                if (window.updateBalance) {
                    window.updateBalance(starsAmount);
                }
            }
            
            const modal = document.createElement('div');
            modal.className = 'case-result-modal';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeCaseResult()"></div>
                <div class="result-content">
                    <div class="result-header">
                        <h2 class="congratulations">üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                    </div>
                    
                    <div class="result-prize ${wonPrize.rarity}">
                        <div class="prize-icon">${wonPrize.emoji}</div>
                        <h3 class="prize-name">${wonPrize.name}</h3>
                        <div class="prize-rarity-badge">${getRarityName(wonPrize.rarity)}</div>
                        ${wonPrize.rarity === 'mythic' ? '<div class="mythic-text">‚ú® –ú–ò–§–ò–ß–ï–°–ö–ê–Ø –†–ï–î–ö–û–°–¢–¨! ‚ú®</div>' : ''}
                    </div>
                    
                    <div class="result-actions">
                        <button class="open-another-btn" onclick="closeCaseResult(); showCasePreview(window.casesData.find(c => c.id === '${caseData.id}'))">
                            üéÅ –û—Ç–∫—Ä—ã—Ç—å –µ—â—ë
                        </button>
                        <button class="close-result-btn" onclick="closeCaseResult()">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                modal.classList.add('active');
            }, 10);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        function showCompactResult(caseData, wonPrize) {
            // –ï—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–ª–∏ –∑–≤–µ–∑–¥—ã, –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö
            if (wonPrize.name.includes('–∑–≤–µ–∑–¥')) {
                const starsAmount = parseInt(wonPrize.name);
                if (window.updateBalance) {
                    window.updateBalance(starsAmount);
                }
            }
            
            const modal = document.createElement('div');
            modal.className = 'compact-result-modal';
            modal.innerHTML = `
                <div class="modal-backdrop" onclick="closeCompactResult()"></div>
                <div class="compact-result-content">
                    <div class="result-icon ${wonPrize.rarity}">${wonPrize.emoji}</div>
                    <h3 class="result-name">${wonPrize.name}</h3>
                    <div class="result-rarity">${getRarityName(wonPrize.rarity)}</div>
                    ${wonPrize.rarity === 'mythic' ? '<div class="mythic-badge">‚ú® –ú–ò–§–ò–ö! ‚ú®</div>' : ''}
                    <div class="result-actions-compact">
                        <button class="again-btn" onclick="closeCompactResult(); openCase('${caseData.id}')">
                            üéÅ –ï—â—ë —Ä–∞–∑
                        </button>
                        <button class="done-btn" onclick="closeCompactResult()">
                            –ì–æ—Ç–æ–≤–æ
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            setTimeout(() => modal.classList.add('active'), 10);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (document.querySelector('.compact-result-modal')) {
                    closeCompactResult();
                }
            }, 4000);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–º–ø–∞–∫—Ç–Ω—ã—Ö –º–æ–¥–∞–ª–æ–≤
        function closeCompactPreview() {
            const modal = document.querySelector('.compact-preview-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        function closeCompactResult() {
            const modal = document.querySelector('.compact-result-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => modal.remove(), 300);
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Ç–∞—Ä—ã–π)
        function closeCaseResult() {
            const modal = document.querySelector('.case-result-modal');
            if (modal) {
                modal.classList.remove('active');
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É –∫–µ–π—Å–æ–≤
        window.showCasesTab = function() {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–∞–± –∫–µ–π—Å–æ–≤
            document.getElementById('cases').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            document.querySelector('[data-tab="cases"]').classList.add('active');
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–µ–π—Å—ã
            loadCasesInstant();
        };
        
        // ===== INVENTORY FUNCTIONS =====
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        async function loadInventory() {
            try {
                const telegramId = window.pixelstarsCasino?.user?.telegram_id || 999999999;
                
                const response = await fetch(`/api/inventory/${telegramId}`);
                const data = await response.json();
                
                if (response.ok) {
                    displayInventory(data.inventory);
                    updateInventoryStats(data.inventory);
                } else {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:', data.error);
                    showEmptyInventory();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è:', error);
                showEmptyInventory();
            }
        }
        
        // –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function displayInventory(inventory) {
            const grid = document.getElementById('inventoryGrid');
            
            if (!inventory || inventory.length === 0) {
                showEmptyInventory();
                return;
            }
            
            grid.innerHTML = inventory.map(item => `
                <div class="inventory-item ${item.rarity}">
                    <div class="item-header">
                        <div class="item-emoji">${item.emoji}</div>
                        <div class="item-info">
                            <h3>${item.name}</h3>
                            <span class="item-rarity ${item.rarity}">${getRarityName(item.rarity)}</span>
                        </div>
                    </div>
                    <div class="item-details">
                        <div class="item-detail">
                            <span class="label">–¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏:</span>
                            <span class="value">${item.sell_price}‚≠ê</span>
                        </div>
                        <div class="item-detail">
                            <span class="label">–ü–æ–ª—É—á–µ–Ω:</span>
                            <span class="value">${new Date(item.obtained_at).toLocaleDateString()}</span>
                        </div>
                        <div class="item-detail">
                            <span class="label">–ò—Å—Ç–æ—á–Ω–∏–∫:</span>
                            <span class="value">${item.from_case}</span>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="sell-btn" onclick="sellItem('${item.id}', '${item.name}', ${item.sell_price})">
                            üí∞ –ü—Ä–æ–¥–∞—Ç—å –∑–∞ ${item.sell_price}‚≠ê
                        </button>
                    </div>
                </div>
            `).join('');
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –ø—É—Å—Ç–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function showEmptyInventory() {
            const grid = document.getElementById('inventoryGrid');
            grid.innerHTML = `
                <div class="inventory-empty">
                    <div class="empty-icon">üì¶</div>
                    <div class="empty-text">–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>
                    <div class="empty-suggestion">–û—Ç–∫—Ä–æ–π—Ç–µ –∫–µ–π—Å—ã, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã!</div>
                </div>
            `;
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
        function updateInventoryStats(inventory) {
            const totalItems = inventory?.length || 0;
            const totalValue = inventory?.reduce((sum, item) => sum + item.sell_price, 0) || 0;
            
            document.getElementById('totalItems').textContent = totalItems;
            document.getElementById('totalValue').textContent = totalValue + '‚≠ê';
        }
        
        // –ü—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç
        async function sellItem(itemId, itemName, sellPrice) {
            if (!confirm(`–ü—Ä–æ–¥–∞—Ç—å "${itemName}" –∑–∞ ${sellPrice}‚≠ê?`)) {
                return;
            }
            
            try {
                const telegramId = window.pixelstarsCasino?.user?.telegram_id || 999999999;
                
                const response = await fetch('/api/inventory/sell', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        telegram_id: telegramId,
                        item_id: itemId
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                    if (window.pixelstarsCasino) {
                        window.pixelstarsCasino.balance = data.new_balance;
                        window.pixelstarsCasino.updateBalance(0);
                    }
                    
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                    loadInventory();
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    showQuickSuccess(`–ü—Ä–æ–¥–∞–Ω–æ! +${sellPrice}‚≠ê`);
                } else {
                    showQuickError(data.error || '–û—à–∏–±–∫–∞ –ø—Ä–æ–¥–∞–∂–∏');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–¥–∞–∂–∏:', error);
                showQuickError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
        function refreshInventory() {
            const grid = document.getElementById('inventoryGrid');
            grid.innerHTML = `
                <div class="inventory-loading">
                    <div class="loading-spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è...</p>
                </div>
            `;
            loadInventory();
        }
        
        // –ü—Ä–æ–¥–∞—Ç—å –≤—Å–µ –æ–±—ã—á–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
        async function sellAllCommon() {
            if (!confirm('–ü—Ä–æ–¥–∞—Ç—å –≤—Å–µ –æ–±—ã—á–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã?')) {
                return;
            }
            
            try {
                const telegramId = window.pixelstarsCasino?.user?.telegram_id || 999999999;
                
                const inventoryResponse = await fetch(`/api/inventory/${telegramId}`);
                const inventoryData = await inventoryResponse.json();
                
                if (!inventoryResponse.ok || !inventoryData.inventory) {
                    showQuickError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è');
                    return;
                }
                
                const commonItems = inventoryData.inventory.filter(item => item.rarity === 'common');
                
                if (commonItems.length === 0) {
                    showQuickError('–ù–µ—Ç –æ–±—ã—á–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏');
                    return;
                }
                
                let totalEarned = 0;
                let soldCount = 0;
                
                for (const item of commonItems) {
                    const response = await fetch('/api/inventory/sell', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            telegram_id: telegramId,
                            item_id: item.id
                        })
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        totalEarned += data.sell_price;
                        soldCount++;
                    }
                }
                
                if (soldCount > 0) {
                    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                    if (window.pixelstarsCasino) {
                        const userResponse = await fetch(`/api/user/${telegramId}`);
                        if (userResponse.ok) {
                            const userData = await userResponse.json();
                            window.pixelstarsCasino.balance = userData.stars_balance;
                            window.pixelstarsCasino.updateBalance(0);
                        }
                    }
                    
                    // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å
                    loadInventory();
                    
                    showQuickSuccess(`–ü—Ä–æ–¥–∞–Ω–æ ${soldCount} –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∑–∞ ${totalEarned}‚≠ê!`);
                } else {
                    showQuickError('–ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–¥–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –º–∞—Å—Å–æ–≤–æ–π –ø—Ä–æ–¥–∞–∂–∏:', error);
                showQuickError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
            }
        }
        
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
        function showQuickSuccess(message) {
            const notification = document.createElement('div');
            notification.className = 'success-notification';
            notification.innerHTML = `
                <div class="success-content">
                    <div class="success-icon">‚úÖ</div>
                    <div class="success-text">${message}</div>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
            if (!document.querySelector('.success-notification-styles')) {
                const styles = document.createElement('style');
                styles.className = 'success-notification-styles';
                styles.textContent = `
                    .success-notification {
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: linear-gradient(45deg, #4CAF50, #45a049);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 10px;
                        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
                        z-index: 10000;
                        transform: translateX(400px);
                        transition: all 0.3s ease;
                    }
                    
                    .success-notification.show {
                        transform: translateX(0);
                    }
                    
                    .success-content {
                        display: flex;
                        align-items: center;
                        gap: 10px;
                    }
                    
                    .success-icon {
                        font-size: 1.2em;
                    }
                `;
                document.head.appendChild(styles);
            }
            
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.add('show'), 10);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
        
        // –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é loadInventory –¥–æ—Å—Ç—É–ø–Ω–æ–π –≥–ª–æ–±–∞–ª—å–Ω–æ
        window.loadInventory = loadInventory;
        
        // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è showPage –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (fallback)
        if (!window.showPage) {
            window.showPage = function(page) {
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // –£–¥–∞–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
                const targetTab = document.getElementById(page);
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
                const navItems = document.querySelectorAll('.nav-item');
                navItems.forEach((item, index) => {
                    const pages = ['home', 'cases', 'rocket', 'profile'];
                    if (pages[index] === page) {
                        item.classList.add('active');
                    }
                });
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è (–≤–∫–ª—é—á–∞—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å)
                if (page === 'profile') {
                    setTimeout(() => loadInventory(), 100);
                }
                
                console.log('–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:', page);
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–Ω—ã—Ö –∑–≤–µ–∑–¥
        function addBonusStars(amount = 1000) {
            const currentBalance = parseInt(localStorage.getItem('stars') || '0');
            const newBalance = currentBalance + amount;
            localStorage.setItem('stars', newBalance.toString());
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
            const balanceEl = document.querySelector('.balance-amount');
            if (balanceEl) {
                balanceEl.textContent = newBalance;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            showQuickSuccess(`–ü–æ–ª—É—á–µ–Ω–æ ${amount} –∑–≤–µ–∑–¥! –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${newBalance} ‚≠ê`);
            console.log(`üí∞ –î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –∑–≤–µ–∑–¥. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${newBalance}`);
            
            return newBalance;
        }
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏—Å–ª—è–µ–º 1000 –∑–≤–µ–∑–¥ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
        function initializeBalance() {
            const hasInitialStars = localStorage.getItem('initialStarsGiven');
            if (!hasInitialStars) {
                localStorage.setItem('stars', '1000');
                localStorage.setItem('initialStarsGiven', 'true');
                console.log('üéÅ –ù–∞—á–∞–ª—å–Ω—ã–µ 1000 –∑–≤–µ–∑–¥ –Ω–∞—á–∏—Å–ª–µ–Ω—ã!');
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
            const currentBalance = localStorage.getItem('stars') || '1000';
            const balanceEl = document.querySelector('.balance-amount');
            if (balanceEl) {
                balanceEl.textContent = currentBalance;
            }
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –æ–±–ª–∞—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏
        window.addBonusStars = addBonusStars;
        
        // –°–µ–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∑–≤–µ–∑–¥
        let secretCode = '';
        document.addEventListener('keydown', function(e) {
            secretCode += e.key.toLowerCase();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ "stars" –∏–ª–∏ "–∑–≤–µ–∑–¥—ã"
            if (secretCode.includes('stars')) {
                addBonusStars(1000);
                secretCode = '';
            } else if (secretCode.includes('bonus')) {
                addBonusStars(5000);
                secretCode = '';
            }
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –∫–æ–¥–∞
            if (secretCode.length > 10) {
                secretCode = secretCode.slice(-5);
            }
        });
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º
        async function testBotConnection() {
            const statusEl = document.getElementById('botStatus');
            if (statusEl) {
                statusEl.innerHTML = 'üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–æ—Ç–æ–º...';
                statusEl.style.background = 'rgba(245, 158, 11, 0.2)';
            }
            
            try {
                if (window.pixelstarsCasino && window.pixelstarsCasino.getBotInfo) {
                    const botInfo = await window.pixelstarsCasino.getBotInfo();
                    
                    if (botInfo && botInfo.ok) {
                        if (statusEl) {
                            statusEl.innerHTML = `‚úÖ –ë–æ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω: @${botInfo.result.username}`;
                            statusEl.style.background = 'rgba(16, 185, 129, 0.2)';
                        }
                        console.log('ü§ñ –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω:', botInfo.result);
                    } else {
                        throw new Error('–ù–µ–≤–µ—Ä–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞');
                    }
                } else {
                    throw new Error('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≥–æ—Ç–æ–≤–æ');
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–æ—Ç—É:', error);
                if (statusEl) {
                    statusEl.innerHTML = '‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–æ—Ç—É';
                    statusEl.style.background = 'rgba(239, 68, 68, 0.2)';
                }
            }
        }
        
        async function syncWithBot() {
            const statusEl = document.getElementById('botStatus');
            if (statusEl) {
                statusEl.innerHTML = 'üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º...';
                statusEl.style.background = 'rgba(245, 158, 11, 0.2)';
            }
            
            try {
                if (window.pixelstarsCasino && window.pixelstarsCasino.syncWithBot) {
                    await window.pixelstarsCasino.syncWithBot();
                    
                    if (statusEl) {
                        statusEl.innerHTML = '‚úÖ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±–æ—Ç–æ–º';
                        statusEl.style.background = 'rgba(16, 185, 129, 0.2)';
                    }
                    console.log('üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–æ—Ç–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
                } else {
                    throw new Error('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –≥–æ—Ç–æ–≤–æ');
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º:', error);
                if (statusEl) {
                    statusEl.innerHTML = '‚ùå –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–æ—Ç–æ–º';
                    statusEl.style.background = 'rgba(239, 68, 68, 0.2)';
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏');
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–ª–∞–Ω—Å
            initializeBalance();
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            setTimeout(() => {
                if (window.showPage) {
                    window.showPage('home');
                }
            }, 100);
        });
    </script>
</body>
</html>